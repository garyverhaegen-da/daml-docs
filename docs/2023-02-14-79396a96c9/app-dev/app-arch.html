<!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Daml Application Architecture &mdash; Daml SDK 0.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/jquery.js"></script>
  <script src="../_static/underscore.js"></script>
  <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/clipboard.min.js"></script>
  <script src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Using JavaScript Client Libraries with Daml" href="bindings-ts/index.html" />
  <link rel="prev" title="Daml Files" href="../index.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Daml Files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"> app-dev/app-arch</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-ts/index.html"> app-dev/bindings-ts/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bindings-ts/daml2js.html">Use the JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-ts/daml-types.html">&#64;daml/types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bindings-ts/daml-react.html"> app-dev/bindings-ts/daml-react</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-ts/daml-types.html"> app-dev/bindings-ts/daml-types</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-ts/daml-ledger.html"> app-dev/bindings-ts/daml-ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-ts/daml2js.html"> app-dev/bindings-ts/daml2js</a></li>
<li class="toctree-l1"><a class="reference internal" href="parties-users.html"> app-dev/parties-users</a></li>
<li class="toctree-l1"><a class="reference internal" href="grpc/index.html"> app-dev/grpc/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="grpc/error-codes.html"> app-dev/grpc/error-codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="grpc/proto-docs.html"> app-dev/grpc/proto-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="grpc/daml-to-ledger-api.html"> app-dev/grpc/daml-to-ledger-api</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html"> app-dev/services</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-x-lang/index.html"> app-dev/bindings-x-lang/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="daml-lf-translation.html"> app-dev/daml-lf-translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-python.html"> app-dev/bindings-python</a></li>
<li class="toctree-l1"><a class="reference internal" href="command-deduplication.html"> app-dev/command-deduplication</a></li>
<li class="toctree-l1"><a class="reference internal" href="ledger-api.html"> app-dev/ledger-api</a><ul>
<li class="toctree-l2"><a class="reference internal" href="services.html">The Ledger API Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="parties-users.html">Parties and Users On a Daml Ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="grpc/index.html">Use the Ledger API With gRPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="grpc/error-codes.html">Error Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="grpc/proto-docs.html">Ledger API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="grpc/daml-to-ledger-api.html">How Daml Types are Translated to Protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="daml-lf-translation.html">How Daml Types are Translated to Daml-LF</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-x-lang/index.html">Create Your Own Bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom-views/index.html"> app-dev/custom-views/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorization.html"> app-dev/authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-java/index.html"> app-dev/bindings-java/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bindings-java/codegen.html">Generate Java Code from Daml</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bindings-java/codegen.html"> app-dev/bindings-java/codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-java/quickstart.html"> app-dev/bindings-java/quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindings-java/example.html"> app-dev/bindings-java/example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/index.html"> json-api/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/lf-value-specification.html"> json-api/lf-value-specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/search-query-language.html"> json-api/search-query-language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup/security-and-privacy.html"> json-api/production-setup/security-and-privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup/scaling-and-redundancy.html"> json-api/production-setup/scaling-and-redundancy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup/metrics.html"> json-api/production-setup/metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup/query-store.html"> json-api/production-setup/query-store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup/logging.html"> json-api/production-setup/logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup/architecture.html"> json-api/production-setup/architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/production-setup.html"> json-api/production-setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/index.html"> upgrade/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/extend.html">Extending Daml Applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml Applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/extend.html"> upgrade/extend</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/upgrade.html"> upgrade/upgrade</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/automation.html"> upgrade/automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/auth-middleware/index.html"> tools/auth-middleware/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/auth-middleware/oauth2.html"> tools/auth-middleware/oauth2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/canton-console.html"> tools/canton-console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/trigger-service/index.html"> tools/trigger-service/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/trigger-service/auth0_example.html"> tools/trigger-service/auth0_example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/trigger-service/authorization.html"> tools/trigger-service/authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/assistant.html"> tools/assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/codegen.html"> tools/codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/non-repudiation.html"> tools/non-repudiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/visual.html"> tools/visual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/navigator/index.html"> tools/navigator/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sandbox.html"> tools/sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler.html"> tools/profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/export/index.html"> tools/export/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-off-ledger.html"> daml-off-ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/index.html"> triggers/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../triggers/api/index.html">Daml Trigger Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger.html">Daml.Trigger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a></li>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/api/index.html"> triggers/api/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../triggers/api/Daml-Trigger.html">Daml.Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html"> triggers/api/Daml-Trigger-LowLevel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html"> triggers/api/Daml-Trigger-Assert</a></li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/api/Daml-Trigger.html"> triggers/api/Daml-Trigger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/generic_ledger.html"> deploy/generic_ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-repl/index.html"> daml-repl/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/considerations.html"> daml/considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/daml-studio.html"> daml/daml-studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/locking.html"> daml/patterns/locking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Lock by Archiving</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Lock by State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Lock by Safekeeping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/initaccept.html"> daml/patterns/initaccept</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html"> daml/patterns/multiparty-agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html"> daml/patterns/locking/locking-by-safekeeping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html"> daml/patterns/locking/locking-by-state</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html"> daml/patterns/locking/locking-by-archiving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/legends.html"> daml/patterns/legends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/delegation.html"> daml/patterns/delegation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns/authorization.html"> daml/patterns/authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/3_Data.html"> daml/intro/3_Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/8_Exceptions.html"> daml/intro/8_Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/12_Testing.html"> daml/intro/12_Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/5_Restrictions.html"> daml/intro/5_Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/6_Parties.html"> daml/intro/6_Parties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/99_NextSteps.html"> daml/intro/99_NextSteps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/2_DamlScript.html"> daml/intro/2_DamlScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/10_Functional101.html"> daml/intro/10_Functional101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/1_Token.html"> daml/intro/1_Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/0_Intro.html"> daml/intro/0_Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/13_Interfaces.html"> daml/intro/13_Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/4_Transformations.html"> daml/intro/4_Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/7_Composing.html"> daml/intro/7_Composing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/9_Dependencies.html"> daml/intro/9_Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/intro/11_StdLib.html"> daml/intro/11_StdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/patterns.html"> daml/patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/initaccept.html">The Initiate and Accept Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/multiparty-agreement.html">The Multiple Party Agreement Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/delegation.html">The Delegation Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/authorization.html">The Authorization Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/locking.html">The Locking Pattern</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-archiving.html">Lock by Archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-state.html">Lock by State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../daml/patterns/locking/locking-by-safekeeping.html">Lock by Safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml/patterns/legends.html">Diagram Legends</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html"> daml/stdlib/DA-Numeric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/index.html"> daml/stdlib/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/Prelude.html">Prelude</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Action.html">DA.Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html">DA.Action.State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html">DA.Action.State.Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Assert.html">DA.Assert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html">DA.Bifunctor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html">DA.BigNumeric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Date.html">DA.Date</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Either.html">DA.Either</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Exception.html">DA.Exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html">DA.Foldable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Functor.html">DA.Functor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html">DA.Internal.Interface.AnyView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView-Types.html">DA.Internal.Interface.AnyView.Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-List.html">DA.List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html">DA.List.BuiltinOrder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html">DA.List.Total</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Logic.html">DA.Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Map.html">DA.Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Math.html">DA.Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html">DA.Monoid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html">DA.NonEmpty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html">DA.NonEmpty.Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Numeric.html">DA.Numeric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Optional.html">DA.Optional</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Record.html">DA.Record</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html">DA.Semigroup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Set.html">DA.Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Stack.html">DA.Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Text.html">DA.Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html">DA.TextMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Time.html">DA.Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html">DA.Traversable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html">DA.Tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/DA-Validation.html">DA.Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/GHC-Show-Text.html">GHC.Show.Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/stdlib/GHC-Tuple-Check.html">GHC.Tuple.Check</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView.html"> daml/stdlib/DA-Internal-Interface-AnyView</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Action.html"> daml/stdlib/DA-Action</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Monoid.html"> daml/stdlib/DA-Monoid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Foldable.html"> daml/stdlib/DA-Foldable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-TextMap.html"> daml/stdlib/DA-TextMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Tuple.html"> daml/stdlib/DA-Tuple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Record.html"> daml/stdlib/DA-Record</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Internal-Interface-AnyView-Types.html"> daml/stdlib/DA-Internal-Interface-AnyView-Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-List.html"> daml/stdlib/DA-List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-List-Total.html"> daml/stdlib/DA-List-Total</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Either.html"> daml/stdlib/DA-Either</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Traversable.html"> daml/stdlib/DA-Traversable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Optional.html"> daml/stdlib/DA-Optional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Map.html"> daml/stdlib/DA-Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty-Types.html"> daml/stdlib/DA-NonEmpty-Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Time.html"> daml/stdlib/DA-Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Bifunctor.html"> daml/stdlib/DA-Bifunctor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/Prelude.html"> daml/stdlib/Prelude</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Set.html"> daml/stdlib/DA-Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Semigroup.html"> daml/stdlib/DA-Semigroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Assert.html"> daml/stdlib/DA-Assert</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Functor.html"> daml/stdlib/DA-Functor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Text.html"> daml/stdlib/DA-Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Logic.html"> daml/stdlib/DA-Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/GHC-Show-Text.html"> daml/stdlib/GHC-Show-Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Date.html"> daml/stdlib/DA-Date</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Action-State-Class.html"> daml/stdlib/DA-Action-State-Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-NonEmpty.html"> daml/stdlib/DA-NonEmpty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Math.html"> daml/stdlib/DA-Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-List-BuiltinOrder.html"> daml/stdlib/DA-List-BuiltinOrder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Stack.html"> daml/stdlib/DA-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Action-State.html"> daml/stdlib/DA-Action-State</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Validation.html"> daml/stdlib/DA-Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-BigNumeric.html"> daml/stdlib/DA-BigNumeric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/GHC-Tuple-Check.html"> daml/stdlib/GHC-Tuple-Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/stdlib/DA-Exception.html"> daml/stdlib/DA-Exception</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/troubleshooting.html"> daml/troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/resource-management/latency-and-throughput.html"> daml/resource-management/latency-and-throughput</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/resource-management/index.html"> daml/resource-management/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/resource-management/active-contract-set.html"> daml/resource-management/active-contract-set</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/templates.html"> daml/reference/templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/index.html"> daml/reference/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/structure.html">Overview: Template Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml/reference/interfaces.html">Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/working-with.html"> daml/reference/working-with</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/functions.html"> daml/reference/functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/data-types.html"> daml/reference/data-types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/choices.html"> daml/reference/choices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/packages.html"> daml/reference/packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/expressions.html"> daml/reference/expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/structure.html"> daml/reference/structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/contract-keys.html"> daml/reference/contract-keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/file-structure.html"> daml/reference/file-structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/updates.html"> daml/reference/updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/exceptions.html"> daml/reference/exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml/reference/interfaces.html"> daml/reference/interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html"> getting-started/index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/testing.html"> getting-started/testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/path-variables.html"> getting-started/path-variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/manual-download.html"> getting-started/manual-download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html"> getting-started/app-architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html"> getting-started/first-feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html"> getting-started/installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html"> support/support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/status-definitions.html"> support/status-definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html"> support/overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html"> support/releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html"> support/compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/component-statuses.html"> support/component-statuses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/time.html"> concepts/time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/index.html"> concepts/ledger-model/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Define Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html"> concepts/ledger-model/ledger-privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html"> concepts/ledger-model/ledger-structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html"> concepts/ledger-model/ledger-integrity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html"> concepts/ledger-model/ledger-daml</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html"> concepts/ledger-model/ledger-exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html"> concepts/interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/test-evidence.html"> concepts/test-evidence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/identity-and-package-management.html"> concepts/identity-and-package-management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html"> concepts/glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/local-ledger.html"> concepts/local-ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/system_architecture_faq.html"> ops/system_architecture_faq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/requirements.html"> ops/requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/pruning.html"> ops/pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/common-metrics.html"> ops/common-metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/metering.html"> ops/metering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-script/index.html"> daml-script/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-script/api/index.html">Daml Script Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/api/Daml-Script.html">Daml.Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-script/api/index.html"> daml-script/api/index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../daml-script/api/Daml-Script.html">Daml.Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-script/api/Daml-Script.html"> daml-script/api/Daml-Script</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../building-applications.html"> building-applications</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Daml Application Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-ts/index.html">Using JavaScript Client Libraries with Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml2js.html">Use the JavaScript Code Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-ts/daml-types.html">&#64;daml/types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="bindings-java/index.html">Java Bindings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bindings-java/codegen.html">Generate Java Code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bindings-python.html">Python Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-script/index.html">Daml Script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../daml-script/api/index.html">Daml Script Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../daml-script/api/Daml-Script.html">Daml.Script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/index.html">Upgrading and Extending Daml Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/extend.html">Extending Daml Applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml Applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="services.html">The Ledger API Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="parties-users.html">Parties and Users On a Daml Ledger</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/index.html">Use the Ledger API With gRPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/error-codes.html">Error Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/proto-docs.html">Ledger API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="grpc/daml-to-ledger-api.html">How Daml Types are Translated to Protobuf</a></li>
<li class="toctree-l3"><a class="reference internal" href="daml-lf-translation.html">How Daml Types are Translated to Daml-LF</a></li>
<li class="toctree-l3"><a class="reference internal" href="bindings-x-lang/index.html">Create Your Own Bindings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="command-deduplication.html">Command Deduplication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../triggers/api/index.html">Daml Trigger Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger.html">Daml.Trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-Assert.html">Daml.Trigger.Assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../triggers/api/Daml-Trigger-LowLevel.html">Daml.Trigger.LowLevel</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../high-level-intro.html"> high-level-intro</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../canton-refs.html">Dummy Canton Refs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../canton-refs.html#dummy-toc-refs">Dummy TOC Refs</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/Daml_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/developers" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Daml Application Architecture</a><ul>
<li><a class="reference internal" href="#backend">Backend</a></li>
<li><a class="reference internal" href="#frontend">Frontend</a></li>
<li><a class="reference internal" href="#authorization">Authorization</a></li>
<li><a class="reference internal" href="#developer-workflow">Developer Workflow</a><ul>
<li><a class="reference internal" href="#command-deduplication">Command Deduplication</a></li>
<li><a class="reference internal" href="#deal-with-failures">Deal With Failures</a><ul>
<li><a class="reference internal" href="#crash-recovery">Crash Recovery</a></li>
<li><a class="reference internal" href="#fail-over-between-ledger-api-endpoints">Fail Over Between Ledger API Endpoints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deal-with-time">Deal With Time</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="daml-application-architecture">
<span id="recommended-architecture"></span><h1>Daml Application Architecture<a class="headerlink" href="#daml-application-architecture" title="Permalink to this heading">¶</a></h1>
<p>This section describes our recommended design of a full-stack Daml application.</p>
<img alt="Diagram of the recommended application architecture, explained in depth immediately below." src="../_images/recommended_architecture.svg" /><p>The above image shows the recommended architecture. Here there are four types of building blocks that go into our application: user code, Daml components, generated code from Daml, and external components. In the recommended architecture the Daml model determines the DAR files that underpin both the front-end and back-end. The front-end includes user code such as a React Web Frontend, Daml React libraries or other integration libraries, and generated code from the DAR files. The back-end consists of Daml integration components (e.g. JSON API) and a participant node; the participant node communicates with an external token issuer. The Daml network, meanwhile, includes Daml drivers paired with external synchronization technologies.</p>
<p>Of course there are many ways that the architecture and technology
stack can be changed to fit your needs, which we’ll mention in the corresponding sections.</p>
<p>To get started quickly with the recommended application architecture, generate a new project using the <code class="docutils literal notranslate"><span class="pre">create-daml-app</span></code> template:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daml new --template<span class="o">=</span>create-daml-app my-project-name
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">create-daml-app</span></code> is a small, but fully functional demo application implementing the recommended
architecture, providing you with an excellent starting point for your own application. It showcases</p>
<ul class="simple">
<li>using Daml React libraries</li>
<li>quick iteration against the <a class="reference internal" href="../tools/sandbox.html#sandbox-manual"><span class="std std-ref">Daml Sandbox</span></a>.</li>
<li>authorization</li>
<li>deploying your application in the cloud as a Docker container</li>
</ul>
<div class="section" id="backend">
<h2>Backend<a class="headerlink" href="#backend" title="Permalink to this heading">¶</a></h2>
<p>The backend for your application can be any Daml ledger implementation running your DAR
(<a class="reference internal" href="../concepts/glossary.html#dar-file-dalf-file"><span class="std std-ref">Daml Archive</span></a>) file.</p>
<p>We recommend using the <a class="reference internal" href="../json-api/index.html#json-api"><span class="std std-ref">Daml JSON API</span></a> as an interface to your frontend. It is
served by the HTTP JSON API server connected to the ledger API server. It provides simple HTTP
endpoints to interact with the ledger via GET/POST requests. However, if you prefer, you can also
use the <a class="reference internal" href="grpc/index.html#grpc"><span class="std std-ref">gRPC Ledger API</span></a> directly.</p>
<p>When you use the <code class="docutils literal notranslate"><span class="pre">create-daml-app</span></code> template application, you can start a Daml Sandbox together
with a JSON API server by running the following command in the root of the project.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daml start --start-navigator<span class="o">=</span>no
</pre></div>
</div>
<p>Daml Sandbox exposes the same Daml Ledger API a Participant Node would
expose without requiring a fully-fledged Daml network to back the application. Once your
application matures and becomes ready for production, the <code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">deploy</span></code> command helps you deploy
your frontend and Daml artifacts of your project to a production Daml network.</p>
</div>
<div class="section" id="frontend">
<h2>Frontend<a class="headerlink" href="#frontend" title="Permalink to this heading">¶</a></h2>
<p>We recommended building your frontend with the <a class="reference external" href="https://reactjs.org">React</a> framework. However,
you can choose virtually any language for your frontend and interact with the ledger via
<a class="reference internal" href="../json-api/index.html#json-api"><span class="std std-ref">HTTP JSON</span></a> endpoints. In addition, we provide support libraries for
<a class="reference internal" href="bindings-java/index.html#java-bindings"><span class="std std-ref">Java</span></a> and you can also interact with the <a class="reference internal" href="grpc/index.html#grpc"><span class="std std-ref">gRPC Ledger API</span></a> directly.</p>
<p>We provide two libraries to build your React frontend for a Daml application.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Summary</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://www.npmjs.com/package/&#64;daml/react">&#64;daml/react</a></td>
<td>React hooks to query/create/exercise Daml contracts</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://www.npmjs.com/package/&#64;daml/ledger">&#64;daml/ledger</a></td>
<td>Daml ledger object to connect and directly submit commands to the ledger</td>
</tr>
</tbody>
</table>
<p>You can install any of these libraries by running <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">&lt;library&gt;</span></code> in the <code class="docutils literal notranslate"><span class="pre">ui</span></code> directory of
your project, e.g. <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">&#64;daml/react</span></code>. Please explore the <code class="docutils literal notranslate"><span class="pre">create-daml-app</span></code> example project
to see the usage of these libraries.</p>
<p>To make your life easy when interacting with the ledger, the Daml assistant can generate JavaScript
libraries with TypeScript typings from the data types declared in the deployed DAR.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daml codegen js .daml/dist/&lt;your-project-name.dar&gt; -o ui/daml.js
</pre></div>
</div>
<p>This command will generate a JavaScript library for each DALF in your DAR, containing metadata about
types and templates in the DALF and TypeScript typings them. In <code class="docutils literal notranslate"><span class="pre">create-daml-app</span></code>, <code class="docutils literal notranslate"><span class="pre">ui/package.json</span></code> refers to these
libraries via the <code class="docutils literal notranslate"><span class="pre">&quot;create-daml-app&quot;:</span> <span class="pre">&quot;file:../daml.js/create-daml-app-0.1.0&quot;</span></code> entry in the
<code class="docutils literal notranslate"><span class="pre">dependencies</span></code> field.</p>
<p>If you choose a different JavaScript based frontend framework, the packages <code class="docutils literal notranslate"><span class="pre">&#64;daml/ledger</span></code>,
<code class="docutils literal notranslate"><span class="pre">&#64;daml/types</span></code> and the generated <code class="docutils literal notranslate"><span class="pre">daml.js</span></code> libraries provide you with the necessary code to
connect and issue commands against your ledger.</p>
</div>
<div class="section" id="authorization">
<h2>Authorization<a class="headerlink" href="#authorization" title="Permalink to this heading">¶</a></h2>
<p>When you deploy your application to a production ledger, you need to authenticate the identities of
your users.</p>
<p>Daml ledgers support a unified interface for authorization of commands. Some Daml ledgers, like for
example <a class="reference external" href="https://hub.daml.com">https://hub.daml.com</a>, offer integrated authentication and authorization, but you can also
use an external service provider like <a class="reference external" href="https://auth0.com">https://auth0.com</a>. The Daml react libraries support interfacing
with a Daml ledger that validates authorization of incoming requests. Simply initialize your
<code class="docutils literal notranslate"><span class="pre">DamlLedger</span></code> object with the token obtained by the respective token issuer. How authorization works and the
form of the required tokens is described in the <a class="reference internal" href="authorization.html#authorization"><span class="std std-ref">Authorization</span></a> section.</p>
</div>
<div class="section" id="developer-workflow">
<h2>Developer Workflow<a class="headerlink" href="#developer-workflow" title="Permalink to this heading">¶</a></h2>
<p>The SDK enables a local development environment with fast iteration cycles:</p>
<ol class="arabic simple">
<li>The integrated VSCode IDE (<code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">studio</span></code>) runs your Scripts on any change to your Daml models. See <a class="reference internal" href="../daml/intro/2_DamlScript.html#testing-using-script"><span class="std std-ref">Daml Script</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">daml</span> <span class="pre">start</span></code> will build all of your Daml code, generate the JavaScript bindings, and start the required “backend” processes (sandbox and HTTP JSON API). It will also allow you to press <code class="docutils literal notranslate"><span class="pre">r</span></code> (followed by Enter on Windows) to rebuild your code, regenerate the JavaScript bindings and upload the new code to the running ledger.</li>
<li><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">start</span></code> will watch your JavaScript source files for change and recompile them immediately when they are saved.</li>
</ol>
<p>Together, these features can provide you with very tight feedback loops while developing your Daml application, all the way from your Daml contracts up to your web UI. A typical Daml developer workflow is to</p>
<blockquote>
<div><ol class="arabic simple">
<li>Make a small change to your Daml data model</li>
<li>Optionally test your Daml code with <a class="reference internal" href="../daml/intro/2_DamlScript.html#testing-using-script"><span class="std std-ref">Daml Script</span></a></li>
<li>Edit your React components to be aligned with changes made in Daml code</li>
<li>Extend the UI to make use of the newly introduced feature</li>
<li>Make further changes either to your Daml and/or React code until you’re happy with what you’ve developed</li>
</ol>
</div></blockquote>
<img alt="A simple developer workflow - iterate on the Daml model, iterate on the UI, repeat." src="../_images/developer_workflow.svg" /><p>See <a class="reference internal" href="../getting-started/first-feature.html"><span class="doc">Your First Feature</span></a> for a more detailed walkthrough of these steps.</p>
<div class="section" id="command-deduplication">
<h3>Command Deduplication<a class="headerlink" href="#command-deduplication" title="Permalink to this heading">¶</a></h3>
<p>The interaction of a Daml application with the ledger is inherently asynchronous: applications send commands to the ledger, and some time later they see the effect of that command on the ledger.</p>
<p>There are several things that can fail during this time window: the application can crash, the participant node can crash, messages can be lost on the network, or the ledger may be just slow to respond due to a high load.</p>
<p>If you want to make sure that a command is not executed twice, your application needs to robustly handle all failure scenarios.
Daml ledgers provide a mechanism for <a class="reference internal" href="command-deduplication.html"><span class="doc">command deduplication</span></a> to help deal with this problem.</p>
<p>For each command the application provides a command ID and an optional parameter that specifies the deduplication period.
If the latter parameter is not specified in the command submission itself, the ledger will use the configured maximum deduplication duration.
The ledger will then guarantee that commands with the same <a class="reference internal" href="services.html#change-id"><span class="std std-ref">change ID</span></a> will generate a rejection within the effective deduplication period.</p>
<p>For details on how to use command deduplication, see the <a class="reference internal" href="command-deduplication.html"><span class="doc">Command Deduplication Guide</span></a>.</p>
</div>
<div class="section" id="deal-with-failures">
<span id="dealing-with-failures"></span><h3>Deal With Failures<a class="headerlink" href="#deal-with-failures" title="Permalink to this heading">¶</a></h3>
<div class="section" id="crash-recovery">
<span id="id1"></span><h4>Crash Recovery<a class="headerlink" href="#crash-recovery" title="Permalink to this heading">¶</a></h4>
<p>In order to restart your application from a previously known ledger state,
your application must keep track of the last ledger offset received
from the <a class="reference internal" href="services.html#transaction-service"><span class="std std-ref">transaction service</span></a> or the
<a class="reference internal" href="services.html#command-completion-service"><span class="std std-ref">command completion service</span></a>.</p>
<p>By persisting this offset alongside the relevant state as part of a single,
atomic operation, your application can resume from where it left off.</p>
</div>
<div class="section" id="fail-over-between-ledger-api-endpoints">
<span id="failing-over-between-ledger-api-endpoints"></span><h4>Fail Over Between Ledger API Endpoints<a class="headerlink" href="#fail-over-between-ledger-api-endpoints" title="Permalink to this heading">¶</a></h4>
<p>Some Daml Ledgers support exposing multiple eventually consistent Ledger API
endpoints where command deduplication works across these Ledger API endpoints.
For example, these endpoints might be hosted by separate Ledger API servers
that replicate the same data and host the same parties. Contact your ledger
operator to find out whether this applies to your ledger.</p>
<p>Below we describe how you can build your application such that it can switch
between such eventually consistent Ledger API endpoints to tolerate server
failures. You can do this using the following two steps.</p>
<p>First, your application must keep track of the ledger offset as described in the
<a class="reference internal" href="#crash-recovery"><span class="std std-ref">paragraph about crash recovery</span></a>. When switching to a new
Ledger API endpoint, it must resume consumption of the transaction (tree)
and/or the command completion streams starting from this last received
offset.</p>
<p>Second, your application must retry on <code class="docutils literal notranslate"><span class="pre">OUT_OF_RANGE</span></code> errors (see
<a class="reference external" href="https://grpc.github.io/grpc/core/md_doc_statuscodes.html">gRPC status codes</a>)
received from a stream subscription – using an appropriate backoff strategy
to avoid overloading the server. Such errors can be raised because of eventual
consistency. The Ledger API endpoint that the application is newly subscribing
to might be behind the endpoint that it subscribed to before the switch, and
needs time to catch up. Thanks to eventual consistency this is guaranteed to
happen at some point in the future.</p>
<p>Once the application successfully subscribes to its required streams on the
new endpoint, it will resume normal operation.</p>
</div>
</div>
<div class="section" id="deal-with-time">
<span id="dealing-with-time"></span><h3>Deal With Time<a class="headerlink" href="#deal-with-time" title="Permalink to this heading">¶</a></h3>
<p>The Daml language contains a function <a class="reference internal" href="../daml/reference/updates.html#daml-ref-gettime"><span class="std std-ref">getTime</span></a> which returns a rough estimate of “current time” called <em>Ledger Time</em>. The notion of time comes with a lot of problems in a distributed setting: different participants might run different clocks, there may be latencies due to calculation and network, clocks may drift against each other over time, etc.</p>
<p>In order to provide a useful notion of time in Daml without incurring severe performance or liveness penalties, Daml has two notions of time: <em>Ledger Time</em> and <em>Record Time</em>:</p>
<ul class="simple">
<li>As part of command interpretation, each transaction is automatically assigned a <em>Ledger Time</em> by the participant server.</li>
<li>All calls to <code class="docutils literal notranslate"><span class="pre">getTime</span></code> within a transaction return the <em>Ledger Time</em> assigned to that transaction.</li>
<li><em>Ledger Time</em> is chosen (and validated) to respect Causal Monotonicity: The Create action on a contract <em>c</em> always precedes all other actions on <em>c</em> in Ledger Time.</li>
<li>As part of the commit/synchronization protocol of the underlying infrastructure, every transaction is assigned a <em>Record Time</em>, which can be thought of as the infrastructures “system time”. It’s the best available notion of “real time”, but the only guarantees on it are the guarantees the underlying infrastructure can give. It is also not known at interpretation time.</li>
<li><em>Ledger Time</em> is kept close to “real time” by bounding it against <em>Record Time</em>. Transactions where <em>Ledger</em> and <em>Record Time</em> are too far apart are rejected.</li>
</ul>
<p>Some commands might take a long time to process, and by the time the resulting transaction is about to be committed to the ledger, it might violate the condition that <em>Ledger Time</em> should  be reasonably close to <em>Record Time</em> (even when considering the ledger’s tolerance interval). To avoid such problems, applications can set the optional parameters <a class="reference internal" href="grpc/proto-docs.html#com-daml-ledger-api-v1-commands-min-ledger-time-abs"><span class="std std-ref">min_ledger_time_abs</span></a> or <a class="reference internal" href="grpc/proto-docs.html#com-daml-ledger-api-v1-commands-min-ledger-time-rel"><span class="std std-ref">min_ledger_time_rel</span></a> that specify (in absolute or relative terms) the minimal <em>Ledger Time</em> for the transaction. The ledger will then process the command, but wait with committing the resulting transaction until <em>Ledger Time</em> fits within the ledger’s tolerance interval.</p>
<p>How is this used in practice?</p>
<ul class="simple">
<li>Be aware that <code class="docutils literal notranslate"><span class="pre">getTime</span></code> is only reasonably close to real time, and not completely monotonic. Avoid Daml workflows that rely on very accurate time measurements or high frequency time changes.</li>
<li>Set <code class="docutils literal notranslate"><span class="pre">min_ledger_time_abs</span></code> or <code class="docutils literal notranslate"><span class="pre">min_ledger_time_rel</span></code> if the duration of command interpretation and transmission is likely to take a long time relative to the tolerance interval set by the ledger.</li>
<li>In some corner cases, the participant node may be unable to determine a suitable Ledger Time by itself. If you get an error that no Ledger Time could be found, check whether you have contention on any contract referenced by your command or whether the referenced contracts are sensitive to small changes of <code class="docutils literal notranslate"><span class="pre">getTime</span></code>.</li>
</ul>
<p>For more details, see <a class="reference internal" href="../concepts/time.html#time"><span class="std std-ref">Background concepts - time</span></a>.</p>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../index.html" class="da-btn da-btn-label btn-prev" title="Daml Files" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="bindings-ts/index.html" class="da-btn da-btn-label btn-next" title="Using JavaScript Client Libraries with Daml" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2023 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>